---
description: Create a new private certificate authority using AWS Certificate Manager.
---

# Manage a Cloudformation Stack

Once you have deployed a <ZillaPlus/> Cloudformation stack you can manage it in the following ways.

## Monitoring

The CloudFormation template used to deploy the <ZillaPlus/> proxy includes a Network Load Balancer that can be monitored via [CloudWatch](https://console.aws.amazon.com/cloudwatch) to verify continuous health.

Network Load Balancers have [many available metrics](https://docs.aws.amazon.com/elasticloadbalancing/latest/network/load-balancer-cloudwatch-metrics.html), including the following.

- `TCP_Target_Reset_Count` - The total number of reset (RST) packets sent from a target to a client. These resets are generated by the target and forwarded by the load balancer.
- `UnHealthyHostCount` - The number of targets that are considered unhealthy.

You can use [CloudWatch](https://console.aws.amazon.com/cloudwatch) to create a dashboard to monitor these metrics and set alarms to alert you when specific metric thresholds are reached.

## Upgrading

Navigate to your [AWS Marketplace](https://console.aws.amazon.com/marketplace) subscriptions and select `Zilla Plus for *` to show the manage subscription page.

- From the `Agreement` section > `Actions` menu > select `Launch CloudFormation stack`
- Select the `CloudFormation Template` fulfillment option with the same `Secure Public Access` template used to deploy the proxy
- Make sure you have selected the desired region selected, such as `us-east-1`
- Click `Continue to Launch`
  - Choose the action `Launch CloudFormation`
- Click `Launch` to show the URL of the CloudFormation template
  - Copy the CloudFormation template Amazon S3 URL
- Select your existing CloudFormation Stack from a previous deployment of `Zilla Plus for *`
- Click `Update` and `Replace current template` with the copied Amazon S3 URL
- Complete the wizard to deploy the updated stack.

CloudFormation will incrementally deploy the <ZillaPlus/> proxies for the new version behind the same Network Load Balancer, checking for successful deployment before terminating the <ZillaPlus/> proxies for the previous version.

Connected clients will see their connections drop, and when they reconnect automatically, the Network Load Balancer will direct them to the new <ZillaPlus/> proxies. If the stack update is unsuccessful, then CloudFormation will rollback to use the previous stack deployment.
