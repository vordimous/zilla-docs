{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Namespace",
    "type": "object",
    "properties": {
        "name": {
            "title": "Name",
            "anyOf": [
                {
                    "type": "string",
                    "pattern": "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$"
                },
                {
                    "$ref": "#/$defs/expression"
                }
            ]
        },
        "vaults": {
            "title": "Vaults",
            "type": "object",
            "patternProperties": {
                "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                    "$ref": "#/$defs/vault"
                }
            },
            "additionalProperties": false
        },
        "guards": {
            "title": "Guards",
            "type": "object",
            "patternProperties": {
                "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                    "$ref": "#/$defs/guard"
                }
            },
            "additionalProperties": false
        },
        "telemetry": {
            "title": "Telemetry",
            "type": "object",
            "properties": {
                "attributes": {
                    "type": "object",
                    "patternProperties": {
                        "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ]
                        }
                    }
                },
                "metrics": {
                    "$ref": "#/$defs/telemetry/metrics"
                },
                "exporters": {
                    "title": "Exporters",
                    "type": "object",
                    "patternProperties": {
                        "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                            "$ref": "#/$defs/telemetry/exporter"
                        }
                    },
                    "additionalProperties": false
                }
            },
            "additionalProperties": false
        },
        "catalogs": {
            "title": "Catalogs",
            "type": "object",
            "patternProperties": {
                "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                    "$ref": "#/$defs/catalog"
                }
            },
            "additionalProperties": false
        },
        "bindings": {
            "title": "Bindings",
            "type": "object",
            "patternProperties": {
                "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                    "$ref": "#/$defs/binding"
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": false,
    "required": [
        "name"
    ],
    "$defs": {
        "expression": {
            "type": "string",
            "pattern": "\\$\\{\\{\\s*([^\\s\\}]*)\\.([^\\s\\}]*)\\s*\\}\\}"
        },
        "vault": {
            "type": "object",
            "properties": {
                "type": {
                    "title": "Type",
                    "anyOf": [
                        {
                            "type": "string",
                            "enum": [
                                "filesystem"
                            ]
                        },
                        {
                            "$ref": "#/$defs/expression"
                        }
                    ]
                },
                "options": {
                    "title": "Options",
                    "type": "object"
                }
            },
            "additionalProperties": false,
            "required": [
                "type"
            ],
            "allOf": [
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "filesystem"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "filesystem"
                            },
                            "options": {
                                "properties": {
                                    "keys": {
                                        "title": "Keys",
                                        "type": "object",
                                        "properties": {
                                            "store": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            },
                                            "type": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ],
                                                "default": "pkcs12"
                                            },
                                            "password": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            }
                                        },
                                        "additionalProperties": false
                                    },
                                    "trust": {
                                        "title": "Trust Certificates",
                                        "type": "object",
                                        "properties": {
                                            "store": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            },
                                            "type": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ],
                                                "default": "pkcs12"
                                            },
                                            "password": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            }
                                        },
                                        "additionalProperties": false
                                    },
                                    "signers": {
                                        "title": "Signer Certificates",
                                        "type": "object",
                                        "properties": {
                                            "store": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            },
                                            "type": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ],
                                                "default": "pkcs12"
                                            },
                                            "password": {
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                },
                                "additionalProperties": false
                            }
                        }
                    }
                }
            ]
        },
        "guard": {
            "type": "object",
            "properties": {
                "type": {
                    "title": "Type",
                    "anyOf": [
                        {
                            "type": "string",
                            "enum": [
                                "jwt"
                            ]
                        },
                        {
                            "$ref": "#/$defs/expression"
                        }
                    ]
                },
                "options": {
                    "title": "Options",
                    "type": "object"
                }
            },
            "additionalProperties": false,
            "required": [
                "type"
            ],
            "allOf": [
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "jwt"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "jwt"
                            },
                            "options": {
                                "properties": {
                                    "issuer": {
                                        "title": "Issuer",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    },
                                    "audience": {
                                        "title": "Audience",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    },
                                    "keys": {
                                        "title": "Keys",
                                        "oneOf": [
                                            {
                                                "anyOf": [
                                                    {
                                                        "type": "string",
                                                        "format": "uri",
                                                        "pattern": "^(https?)://"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "array",
                                                "items": {
                                                    "title": "Key",
                                                    "type": "object",
                                                    "properties": {
                                                        "kty": {
                                                            "title": "Key Type",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "kid": {
                                                            "title": "Key ID",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "additionalProperties": true,
                                                    "required": [
                                                        "kty",
                                                        "kid"
                                                    ]
                                                }
                                            }
                                        ]
                                    },
                                    "challenge": {
                                        "title": "Challenge",
                                        "anyOf": [
                                            {
                                                "type": "number"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    }
                                },
                                "additionalProperties": false
                            }
                        },
                        "required": [
                            "options"
                        ]
                    }
                }
            ]
        },
        "telemetry": {
            "metrics": {
                "type": "array",
                "items": {
                    "enum": [
                        "grpc.request.size",
                        "grpc.response.size",
                        "grpc.active.requests",
                        "grpc.duration",
                        "grpc.requests.per.rpc",
                        "grpc.responses.per.rpc",
                        "http.request.size",
                        "http.response.size",
                        "http.active.requests",
                        "http.duration",
                        "stream.active.received",
                        "stream.active.sent",
                        "stream.opens.received",
                        "stream.opens.sent",
                        "stream.data.received",
                        "stream.data.sent",
                        "stream.errors.received",
                        "stream.errors.sent",
                        "stream.closes.received",
                        "stream.closes.sent"
                    ]
                },
                "uniqueItems": true
            },
            "exporter": {
                "title": "Exporter",
                "type": "object",
                "properties": {
                    "type": {
                        "title": "Type",
                        "anyOf": [
                            {
                                "type": "string",
                                "enum": [
                                    "otlp",
                                    "prometheus",
                                    "stdout"
                                ]
                            },
                            {
                                "$ref": "#/$defs/expression"
                            }
                        ]
                    }
                },
                "required": [
                    "type"
                ],
                "allOf": [
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "otlp"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "type": {
                                    "const": "otlp"
                                },
                                "options": {
                                    "properties": {
                                        "interval": {
                                            "anyOf": [
                                                {
                                                    "type": "number"
                                                },
                                                {
                                                    "$ref": "#/$defs/expression"
                                                }
                                            ],
                                            "default": 30
                                        },
                                        "signals": {
                                            "type": "array",
                                            "items": {
                                                "anyOf": [
                                                    {
                                                        "type": "string",
                                                        "enum": [
                                                            "metrics",
                                                            "logs"
                                                        ]
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            }
                                        },
                                        "endpoint": {
                                            "type": "object",
                                            "properties": {
                                                "protocol": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string",
                                                            "enum": [
                                                                "http"
                                                            ]
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ],
                                                    "default": "http"
                                                },
                                                "location": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                },
                                                "overrides": {
                                                    "type": "object",
                                                    "properties": {
                                                        "metrics": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ],
                                                            "default": "/v1/metrics"
                                                        },
                                                        "logs": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ],
                                                            "default": "/v1/logs"
                                                        }
                                                    }
                                                }
                                            },
                                            "required": [
                                                "location"
                                            ],
                                            "additionalProperties": false
                                        }
                                    },
                                    "required": [
                                        "endpoint"
                                    ],
                                    "additionalProperties": false
                                },
                                "additionalProperties": false
                            },
                            "required": [
                                "options"
                            ]
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "prometheus"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "type": {
                                    "const": "prometheus"
                                },
                                "options": {
                                    "properties": {
                                        "endpoints": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "scheme": {
                                                        "title": "Scheme",
                                                        "anyOf": [
                                                            {
                                                                "type": "string",
                                                                "enum": [
                                                                    "http"
                                                                ]
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "port": {
                                                        "title": "Port",
                                                        "anyOf": [
                                                            {
                                                                "type": "integer"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "path": {
                                                        "title": "Path",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "scheme",
                                                    "port"
                                                ],
                                                "additionalProperties": false
                                            },
                                            "minItems": 1
                                        }
                                    },
                                    "additionalProperties": false
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "stdout"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "type": {
                                    "const": "stdout"
                                }
                            }
                        }
                    }
                ]
            }
        },
        "catalog": {
            "title": "Catalog",
            "type": "object",
            "properties": {
                "type": {
                    "title": "Type",
                    "anyOf": [
                        {
                            "type": "string",
                            "enum": [
                                "apicurio-registry",
                                "apicurio",
                                "filesystem",
                                "inline",
                                "karapace-schema-registry",
                                "karapace",
                                "schema-registry"
                            ]
                        },
                        {
                            "$ref": "#/$defs/expression"
                        }
                    ]
                },
                "options": {
                    "title": "Options",
                    "type": "object"
                }
            },
            "additionalProperties": false,
            "required": [
                "type"
            ],
            "allOf": [
                {
                    "if": {
                        "properties": {
                            "type": {
                                "enum": [
                                    "apicurio-registry",
                                    "apicurio"
                                ]
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "enum": [
                                    "apicurio-registry",
                                    "apicurio"
                                ]
                            },
                            "options": {
                                "properties": {
                                    "url": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    },
                                    "group-id": {
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ],
                                        "default": "default"
                                    },
                                    "use-id": {
                                        "anyOf": [
                                            {
                                                "type": "string",
                                                "enum": [
                                                    "globalId",
                                                    "contentId"
                                                ]
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ],
                                        "default": "globalId"
                                    },
                                    "id-encoding": {
                                        "anyOf": [
                                            {
                                                "type": "string",
                                                "enum": [
                                                    "default",
                                                    "legacy"
                                                ]
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ],
                                        "default": "default"
                                    },
                                    "max-age": {
                                        "title": "Max Age",
                                        "anyOf": [
                                            {
                                                "type": "number"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ],
                                        "default": 300
                                    }
                                },
                                "additionalProperties": false
                            }
                        },
                        "additionalProperties": false
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "filesystem"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "filesystem"
                            },
                            "options": {
                                "properties": {
                                    "subjects": {
                                        "type": "object",
                                        "patternProperties": {
                                            "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                "title": "Subject",
                                                "type": "object",
                                                "properties": {
                                                    "path": {
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "path"
                                                ],
                                                "additionalProperties": false
                                            }
                                        }
                                    }
                                },
                                "additionalProperties": false
                            }
                        },
                        "additionalProperties": false
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "inline"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "inline"
                            },
                            "options": {
                                "properties": {
                                    "subjects": {
                                        "type": "object",
                                        "patternProperties": {
                                            "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                "title": "Subject",
                                                "type": "object",
                                                "properties": {
                                                    "version": {
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "latest"
                                                    },
                                                    "schema": {
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "required": [
                                                    "schema"
                                                ],
                                                "additionalProperties": false
                                            }
                                        }
                                    }
                                },
                                "additionalProperties": false
                            }
                        },
                        "additionalProperties": false
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "enum": [
                                    "karapace-schema-registry",
                                    "karapace"
                                ]
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "enum": [
                                    "karapace-schema-registry",
                                    "karapace"
                                ]
                            },
                            "options": {
                                "$ref": "#/$defs/options/catalog/schema-registry"
                            }
                        },
                        "additionalProperties": false
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "schema-registry"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "schema-registry"
                            },
                            "options": {
                                "$ref": "#/$defs/options/catalog/schema-registry"
                            }
                        },
                        "additionalProperties": false
                    }
                }
            ]
        },
        "cataloged": {
            "oneOf": [
                {
                    "type": "object",
                    "properties": {
                        "id": {
                            "anyOf": [
                                {
                                    "type": "integer"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ]
                        }
                    },
                    "required": [
                        "id"
                    ],
                    "additionalProperties": false
                },
                {
                    "type": "object",
                    "properties": {
                        "strategy": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "enum": [
                                        "topic"
                                    ]
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ]
                        },
                        "version": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ],
                            "default": "latest"
                        }
                    },
                    "required": [
                        "strategy"
                    ],
                    "additionalProperties": false
                },
                {
                    "type": "object",
                    "properties": {
                        "subject": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ]
                        },
                        "version": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ],
                            "default": "latest"
                        }
                    },
                    "required": [
                        "subject"
                    ],
                    "additionalProperties": false
                }
            ]
        },
        "options": {
            "binding": {
                "http": {
                    "authorization": {
                        "title": "Authorizations",
                        "type": "object",
                        "patternProperties": {
                            "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                "title": "Authorization",
                                "type": "object",
                                "properties": {
                                    "credentials": {
                                        "title": "Credentials",
                                        "type": "object",
                                        "properties": {
                                            "cookies": {
                                                "title": "Cookies",
                                                "type": "object",
                                                "additionalProperties": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string",
                                                            "pattern": ".*\\{credentials\\}.*"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            },
                                            "headers": {
                                                "title": "Headers",
                                                "type": "object",
                                                "additionalProperties": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string",
                                                            "pattern": ".*\\{credentials\\}.*"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            },
                                            "query": {
                                                "title": "Query Parameters",
                                                "type": "object",
                                                "additionalProperties": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string",
                                                            "pattern": ".*\\{credentials\\}.*"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            }
                                        },
                                        "additionalProperties": false,
                                        "anyOf": [
                                            {
                                                "required": [
                                                    "cookies"
                                                ]
                                            },
                                            {
                                                "required": [
                                                    "headers"
                                                ]
                                            },
                                            {
                                                "required": [
                                                    "query"
                                                ]
                                            }
                                        ]
                                    }
                                },
                                "additionalProperties": false,
                                "required": [
                                    "credentials"
                                ]
                            }
                        },
                        "maxProperties": 1
                    }
                },
                "kafka": {
                    "sasl": {
                        "title": "SASL",
                        "type": "object",
                        "properties": {
                            "mechanism": {
                                "title": "Mechanism",
                                "anyOf": [
                                    {
                                        "type": "string",
                                        "enum": [
                                            "plain",
                                            "scram-sha-1",
                                            "scram-sha-256",
                                            "scram-sha-512"
                                        ]
                                    },
                                    {
                                        "$ref": "#/$defs/expression"
                                    }
                                ]
                            }
                        },
                        "oneOf": [
                            {
                                "additionalProperties": false,
                                "properties": {
                                    "mechanism": {
                                        "const": "plain"
                                    },
                                    "username": {
                                        "title": "Username",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    },
                                    "password": {
                                        "title": "Password",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    }
                                },
                                "required": [
                                    "username",
                                    "password"
                                ]
                            },
                            {
                                "additionalProperties": false,
                                "properties": {
                                    "mechanism": {
                                        "const": "scram-sha-1"
                                    },
                                    "username": {
                                        "title": "Username",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    },
                                    "password": {
                                        "title": "Password",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    }
                                },
                                "required": [
                                    "username",
                                    "password"
                                ]
                            },
                            {
                                "additionalProperties": false,
                                "properties": {
                                    "mechanism": {
                                        "const": "scram-sha-256"
                                    },
                                    "username": {
                                        "title": "Username",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    },
                                    "password": {
                                        "title": "Password",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    }
                                },
                                "required": [
                                    "username",
                                    "password"
                                ]
                            },
                            {
                                "additionalProperties": false,
                                "properties": {
                                    "mechanism": {
                                        "const": "scram-sha-512"
                                    },
                                    "username": {
                                        "title": "Username",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    },
                                    "password": {
                                        "title": "Password",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    }
                                },
                                "required": [
                                    "username",
                                    "password"
                                ]
                            }
                        ]
                    },
                    "cache_server_topics": {
                        "title": "Topics",
                        "type": "array",
                        "items": {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "name": {
                                    "anyOf": [
                                        {
                                            "type": "string"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "defaultOffset": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "live",
                                                "historical"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "deltaType": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "none",
                                                "json_patch"
                                            ],
                                            "deprecated": true
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "transforms": {
                                    "title": "Transforms",
                                    "type": "array",
                                    "oneOf": [
                                        {
                                            "minItems": 2,
                                            "maxItems": 2,
                                            "items": [
                                                {
                                                    "type": "object",
                                                    "additionalProperties": false,
                                                    "properties": {
                                                        "extract-key": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string",
                                                                    "additionalProperties": false
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        }
                                                    }
                                                },
                                                {
                                                    "type": "object",
                                                    "additionalProperties": false,
                                                    "properties": {
                                                        "extract-headers": {
                                                            "type": "object",
                                                            "patternProperties": {
                                                                "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string",
                                                                            "pattern": "^\\$\\{message\\.value\\.([A-Za-z_][A-Za-z0-9_]*)\\}$"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "additionalProperties": false
                                                        }
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "items": [
                                                {
                                                    "type": "object",
                                                    "additionalProperties": false,
                                                    "properties": {
                                                        "extract-headers": {
                                                            "type": "object",
                                                            "patternProperties": {
                                                                "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string",
                                                                            "pattern": "^\\$\\{message\\.value\\.([A-Za-z_][A-Za-z0-9_]*)\\}$"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "additionalProperties": false
                                                        }
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "minItems": 1,
                                            "maxItems": 1,
                                            "items": [
                                                {
                                                    "type": "object",
                                                    "additionalProperties": false,
                                                    "properties": {
                                                        "extract-key": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string",
                                                                    "additionalProperties": false
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        }
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                },
                                "key": {
                                    "$ref": "#/$defs/converter"
                                },
                                "value": {
                                    "$ref": "#/$defs/converter"
                                }
                            }
                        }
                    }
                },
                "mqtt": {
                    "authorization": {
                        "title": "Authorizations",
                        "type": "object",
                        "patternProperties": {
                            "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                "title": "Authorization",
                                "type": "object",
                                "properties": {
                                    "credentials": {
                                        "title": "Credentials",
                                        "type": "object",
                                        "properties": {
                                            "connect": {
                                                "title": "Connect",
                                                "type": "object",
                                                "properties": {
                                                    "username": {
                                                        "title": "Username",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "password": {
                                                        "title": "Password",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "oneOf": [
                                                    {
                                                        "required": [
                                                            "username"
                                                        ]
                                                    },
                                                    {
                                                        "required": [
                                                            "password"
                                                        ]
                                                    }
                                                ]
                                            }
                                        },
                                        "additionalProperties": false,
                                        "anyOf": [
                                            {
                                                "required": [
                                                    "connect"
                                                ]
                                            }
                                        ]
                                    }
                                },
                                "additionalProperties": false,
                                "required": [
                                    "credentials"
                                ]
                            }
                        },
                        "maxProperties": 1
                    }
                },
                "tcp": {
                    "title": "Options",
                    "type": "object",
                    "properties": {
                        "host": {
                            "title": "Host",
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ]
                        },
                        "port": {
                            "title": "Port",
                            "oneOf": [
                                {
                                    "anyOf": [
                                        {
                                            "type": "integer"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "pattern": "^\\d+(-\\d+)?$"
                                        }
                                    ]
                                },
                                {
                                    "type": "array",
                                    "items": {
                                        "oneOf": [
                                            {
                                                "anyOf": [
                                                    {
                                                        "type": "integer"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            },
                                            {
                                                "anyOf": [
                                                    {
                                                        "type": "string",
                                                        "pattern": "^\\d+(-\\d+)?$"
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    },
                    "additionalProperties": false
                },
                "tls": {
                    "title": "Options",
                    "type": "object",
                    "properties": {
                        "version": {
                            "title": "Version",
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ]
                        },
                        "keys": {
                            "title": "Vault Keys",
                            "type": "array",
                            "items": {
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "$ref": "#/$defs/expression"
                                    }
                                ]
                            }
                        },
                        "trust": {
                            "title": "Vault Certificates",
                            "type": "array",
                            "items": {
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "$ref": "#/$defs/expression"
                                    }
                                ]
                            }
                        },
                        "trustcacerts": {
                            "title": "Trust CA Certificates",
                            "anyOf": [
                                {
                                    "type": "boolean"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ]
                        },
                        "sni": {
                            "title": "Server Names",
                            "type": "array",
                            "items": {
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "$ref": "#/$defs/expression"
                                    }
                                ]
                            }
                        },
                        "alpn": {
                            "title": "Application Protocols",
                            "type": "array",
                            "items": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            }
                        },
                        "mutual": {
                            "title": "Mutual Authentication",
                            "anyOf": [
                                {
                                    "type": "string",
                                    "enum": [
                                        "required",
                                        "requested",
                                        "none"
                                    ]
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ]
                        },
                        "signers": {
                            "title": "Vault Signer Certificates",
                            "type": "array",
                            "items": {
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "$ref": "#/$defs/expression"
                                    }
                                ]
                            }
                        }
                    },
                    "not": {
                        "allOf": [
                            {
                                "required": [
                                    "keys"
                                ]
                            },
                            {
                                "required": [
                                    "signers"
                                ]
                            }
                        ]
                    },
                    "additionalProperties": false
                }
            },
            "catalog": {
                "schema-registry": {
                    "title": "Schema Registry",
                    "type": "object",
                    "properties": {
                        "url": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ]
                        },
                        "context": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ],
                            "default": "default"
                        },
                        "max-age": {
                            "title": "Max Age",
                            "anyOf": [
                                {
                                    "type": "number"
                                },
                                {
                                    "$ref": "#/$defs/expression"
                                }
                            ],
                            "default": 300
                        }
                    },
                    "additionalProperties": false
                }
            }
        },
        "binding": {
            "title": "Binding",
            "type": "object",
            "properties": {
                "vault": {
                    "title": "Vault",
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "$ref": "#/$defs/expression"
                        }
                    ]
                },
                "catalog": {
                    "title": "Catalog",
                    "type": "object",
                    "patternProperties": {
                        "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                            "type": "array",
                            "items": {
                                "$ref": "#/$defs/cataloged"
                            }
                        }
                    },
                    "maxProperties": 1
                },
                "type": {
                    "title": "Type",
                    "anyOf": [
                        {
                            "type": "string",
                            "enum": [
                                "amqp",
                                "asyncapi",
                                "echo",
                                "fan",
                                "filesystem",
                                "grpc",
                                "grpc-kafka",
                                "http",
                                "http-filesystem",
                                "http-kafka",
                                "kafka",
                                "kafka-grpc",
                                "mqtt",
                                "mqtt-kafka",
                                "openapi",
                                "openapi-asyncapi",
                                "pgsql",
                                "proxy",
                                "sse",
                                "sse-kafka",
                                "tcp",
                                "tls",
                                "ws"
                            ]
                        },
                        {
                            "$ref": "#/$defs/expression"
                        }
                    ]
                },
                "kind": {
                    "title": "Kind",
                    "enum": [
                        "client",
                        "server",
                        "proxy",
                        "remote_server",
                        "cache_client",
                        "cache_server"
                    ]
                },
                "options": {
                    "title": "Options",
                    "type": "object"
                },
                "routes": {
                    "title": "Routes",
                    "type": "array",
                    "items": {
                        "title": "Route",
                        "type": "object",
                        "properties": {
                            "exit": {
                                "title": "Exit",
                                "anyOf": [
                                    {
                                        "type": "string"
                                    },
                                    {
                                        "$ref": "#/$defs/expression"
                                    }
                                ]
                            },
                            "when": {
                                "title": "Conditions",
                                "type": "array",
                                "items": {
                                    "title": "Condition",
                                    "type": "object"
                                }
                            },
                            "with": {
                                "title": "Override",
                                "type": "object"
                            },
                            "guarded": {
                                "title": "Guarded",
                                "type": "object",
                                "patternProperties": {
                                    "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                        "title": "Roles",
                                        "type": "array",
                                        "items": {
                                            "title": "Role",
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "$ref": "#/$defs/expression"
                                                }
                                            ]
                                        }
                                    }
                                }
                            }
                        },
                        "additionalProperties": false
                    }
                },
                "telemetry": {
                    "title": "Telemetry",
                    "type": "object",
                    "properties": {
                        "metrics": {
                            "type": "array"
                        }
                    }
                },
                "exit": {
                    "title": "Exit",
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "$ref": "#/$defs/expression"
                        }
                    ]
                },
                "entry": {
                    "title": "Entry",
                    "anyOf": [
                        {
                            "type": "string",
                            "pattern": "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$"
                        },
                        {
                            "$ref": "#/$defs/expression"
                        }
                    ]
                }
            },
            "additionalProperties": false,
            "required": [
                "type",
                "kind"
            ],
            "anyOf": [
                {
                    "properties": {
                        "kind": {
                            "const": "remote_server"
                        }
                    },
                    "required": [
                        "entry"
                    ]
                },
                {
                    "properties": {
                        "kind": {
                            "not": {
                                "const": "remote_server"
                            }
                        },
                        "entry": false
                    }
                }
            ],
            "allOf": [
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "amqp"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "amqp"
                            },
                            "kind": {
                                "enum": [
                                    "server"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": false,
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "additionalProperties": false,
                                                "properties": {
                                                    "address": {
                                                        "title": "Address",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "capabilities": {
                                                        "title": "Capabilities",
                                                        "anyOf": [
                                                            {
                                                                "type": "string",
                                                                "enum": [
                                                                    "send_only",
                                                                    "receive_only",
                                                                    "send_and_receive"
                                                                ]
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "send_and_receive"
                                                    }
                                                }
                                            }
                                        },
                                        "with": false
                                    }
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "asyncapi"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "asyncapi"
                            },
                            "kind": {
                                "enum": [
                                    "server",
                                    "client",
                                    "proxy"
                                ]
                            },
                            "catalog": false,
                            "options": {
                                "properties": {
                                    "specs": {
                                        "title": "Specifications",
                                        "type": "object",
                                        "patternProperties": {
                                            "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                "type": "object",
                                                "properties": {
                                                    "servers": {
                                                        "title": "Servers",
                                                        "type": "array",
                                                        "items": {
                                                            "type": "object",
                                                            "properties": {
                                                                "url": {
                                                                    "title": "URL",
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string",
                                                                            "pattern": "^([a-zA-Z0-9\\\\.-]+)(:(\\\\{[a-zA-Z_]+\\\\}|[0-9]+))?$"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                },
                                                                "host": {
                                                                    "title": "Host",
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string",
                                                                            "pattern": "^([a-zA-Z0-9\\\\.-]+)(:(\\\\{[a-zA-Z_]+\\\\}|[0-9]+))?$"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                },
                                                                "pathname": {
                                                                    "title": "Path Name",
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "additionalProperties": false
                                                        }
                                                    },
                                                    "catalog": {
                                                        "title": "Catalog",
                                                        "type": "object",
                                                        "patternProperties": {
                                                            "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "subject": {
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ]
                                                                    },
                                                                    "version": {
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ],
                                                                        "default": "latest"
                                                                    }
                                                                },
                                                                "required": [
                                                                    "subject"
                                                                ],
                                                                "additionalProperties": false
                                                            },
                                                            "additionalProperties": false
                                                        }
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "additionalProperties": false
                                    },
                                    "tcp": {
                                        "$ref": "#/$defs/options/binding/tcp"
                                    },
                                    "tls": {
                                        "$ref": "#/$defs/options/binding/tls"
                                    },
                                    "http": {
                                        "title": "Http",
                                        "type": "object",
                                        "properties": {
                                            "authorization": {
                                                "$ref": "#/$defs/options/binding/http/authorization"
                                            }
                                        },
                                        "additionalProperties": false
                                    },
                                    "mqtt": {
                                        "title": "MQTT",
                                        "type": "object",
                                        "properties": {
                                            "authorization": {
                                                "$ref": "#/$defs/options/binding/mqtt/authorization"
                                            }
                                        },
                                        "additionalProperties": false
                                    },
                                    "kafka": {
                                        "title": "Kafka",
                                        "type": "object",
                                        "properties": {
                                            "sasl": {
                                                "$ref": "#/$defs/options/binding/kafka/sasl"
                                            },
                                            "topics": {
                                                "$ref": "#/$defs/options/binding/kafka/cache_server_topics"
                                            }
                                        },
                                        "additionalProperties": false
                                    },
                                    "mqtt-kafka": {
                                        "title": "MQTT-Kafka",
                                        "type": "object",
                                        "properties": {
                                            "channels": {
                                                "title": "Channels",
                                                "type": "object",
                                                "properties": {
                                                    "sessions": {
                                                        "title": "Kafka Sessions Channel",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "messages": {
                                                        "title": "Kafka Messages Channel",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "retained": {
                                                        "title": "Kafka Retained Channel",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "additionalProperties": false
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                },
                                "additionalProperties": false
                            },
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "additionalProperties": false,
                                                "properties": {
                                                    "api-id": {
                                                        "title": "Spec API Id",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "operation-id": {
                                                        "title": "MQTT Operation Id",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                }
                                            }
                                        },
                                        "with": {
                                            "properties": {
                                                "api-id": {
                                                    "title": "Spec API Id",
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                },
                                                "operation-id": {
                                                    "title": "MQTT Operation Id",
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            },
                                            "additionalProperties": false
                                        }
                                    }
                                }
                            }
                        },
                        "oneOf": [
                            {
                                "properties": {
                                    "kind": {
                                        "const": "server"
                                    }
                                },
                                "anyOf": [
                                    {
                                        "required": [
                                            "exit"
                                        ]
                                    },
                                    {
                                        "properties": {
                                            "routes": {
                                                "required": [
                                                    "exit"
                                                ]
                                            }
                                        },
                                        "required": [
                                            "routes"
                                        ]
                                    }
                                ]
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "proxy"
                                    }
                                },
                                "anyOf": [
                                    {
                                        "required": [
                                            "exit"
                                        ]
                                    },
                                    {
                                        "properties": {
                                            "routes": {
                                                "required": [
                                                    "exit"
                                                ]
                                            }
                                        },
                                        "required": [
                                            "routes"
                                        ]
                                    }
                                ]
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "client"
                                    },
                                    "routes": {
                                        "items": {
                                            "properties": {
                                                "exit": false
                                            }
                                        }
                                    },
                                    "exit": false
                                }
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "echo"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "echo"
                            },
                            "kind": {
                                "enum": [
                                    "server"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": false,
                            "routes": false,
                            "exit": false
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "fan"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "fan"
                            },
                            "kind": {
                                "enum": [
                                    "server"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": false,
                            "routes": false
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "filesystem"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "filesystem"
                            },
                            "kind": {
                                "enum": [
                                    "server"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": {
                                "properties": {
                                    "location": {
                                        "title": "Location",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    },
                                    "symlinks": {
                                        "title": "Symbolic Links",
                                        "anyOf": [
                                            {
                                                "type": "string",
                                                "enum": [
                                                    "follow",
                                                    "ignore"
                                                ]
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ],
                                        "default": "ignore"
                                    }
                                },
                                "additionalProperties": false
                            },
                            "routes": false,
                            "exit": false
                        }
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "grpc"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "grpc"
                            },
                            "kind": {
                                "enum": [
                                    "server",
                                    "client"
                                ]
                            },
                            "vault": false,
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "method": {
                                                        "title": "Method",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "metadata": {
                                                        "title": "Metadata",
                                                        "type": "object",
                                                        "additionalProperties": {
                                                            "oneOf": [
                                                                {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "base64": {
                                                                            "title": "Base64 value",
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": false
                                    }
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ],
                        "oneOf": [
                            {
                                "properties": {
                                    "kind": {
                                        "const": "server"
                                    },
                                    "options": {
                                        "properties": {
                                            "services": {
                                                "title": "Services",
                                                "type": "array",
                                                "items": {
                                                    "title": "Service",
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                },
                                                "deprecated": true
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "client"
                                    },
                                    "catalog": false,
                                    "options": false
                                }
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "grpc-kafka"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "grpc-kafka"
                            },
                            "kind": {
                                "enum": [
                                    "proxy"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": {
                                "properties": {
                                    "reliability": {
                                        "title": "Reliability",
                                        "type": "object",
                                        "properties": {
                                            "field": {
                                                "title": "Grpc Last Message Id",
                                                "anyOf": [
                                                    {
                                                        "type": "integer",
                                                        "minimum": 1,
                                                        "maximum": 536870911
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ],
                                                "default": 32767
                                            },
                                            "metadata": {
                                                "title": "Grpc Last Message Id Metadata Name",
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ],
                                                "default": "last-message-id"
                                            }
                                        }
                                    },
                                    "idempotency": {
                                        "title": "Idempotency",
                                        "type": "object",
                                        "properties": {
                                            "metadata": {
                                                "title": "Idempotency Metadata name",
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ],
                                                "default": "idempotency-key"
                                            }
                                        }
                                    },
                                    "correlation": {
                                        "title": "Correlation",
                                        "type": "object",
                                        "properties": {
                                            "headers": {
                                                "title": "Correlation Kafka Headers",
                                                "type": "object",
                                                "properties": {
                                                    "service": {
                                                        "title": "Grpc Service Kafka Header",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "zilla:service"
                                                    },
                                                    "method": {
                                                        "title": "Grpc Method Kafka Header",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "zilla:method"
                                                    },
                                                    "correlation-id": {
                                                        "title": "Correlation-Id Kafka Header",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "zilla:correlation-id"
                                                    },
                                                    "reply-to": {
                                                        "title": "Reply to Topic",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "zilla:reply-to"
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "required": [
                                            "headers"
                                        ],
                                        "additionalProperties": false
                                    }
                                },
                                "additionalProperties": false
                            },
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "method": {
                                                        "title": "Method",
                                                        "anyOf": [
                                                            {
                                                                "type": "string",
                                                                "pattern": "^(?<Service>[^/]+)/(?<Method>[^/]+)"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "metadata": {
                                                        "title": "Metadata",
                                                        "type": "object",
                                                        "additionalProperties": {
                                                            "oneOf": [
                                                                {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "base64": {
                                                                            "title": "Base64 value",
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": {
                                            "oneOf": [
                                                {
                                                    "properties": {
                                                        "capability": {
                                                            "title": "Capability",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string",
                                                                    "const": "fetch"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "topic": {
                                                            "title": "Topic",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "filters": {
                                                            "title": "Filters",
                                                            "type": "array",
                                                            "items": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "key": {
                                                                        "title": "Key",
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ]
                                                                    },
                                                                    "headers": {
                                                                        "title": "Headers",
                                                                        "type": "object",
                                                                        "additionalProperties": {
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                },
                                                                "additionalProperties": false
                                                            }
                                                        }
                                                    },
                                                    "additionalProperties": false
                                                },
                                                {
                                                    "properties": {
                                                        "capability": {
                                                            "title": "Capability",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string",
                                                                    "const": "produce"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "topic": {
                                                            "title": "Topic",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "acks": {
                                                            "title": "Acks",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string",
                                                                    "enum": [
                                                                        "none",
                                                                        "leader_only",
                                                                        "in_sync_replicas"
                                                                    ]
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ],
                                                            "default": "in_sync_replicas"
                                                        },
                                                        "key": {
                                                            "title": "Key",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "overrides": {
                                                            "title": "Headers",
                                                            "type": "object",
                                                            "additionalProperties": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "reply-to": {
                                                            "title": "Reply-To topic",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "additionalProperties": false,
                                                    "required": [
                                                        "reply-to"
                                                    ]
                                                }
                                            ],
                                            "required": [
                                                "capability",
                                                "topic"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "with"
                                    ]
                                }
                            },
                            "exit": false
                        },
                        "required": [
                            "routes"
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "http"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "http"
                            },
                            "kind": {
                                "enum": [
                                    "server",
                                    "client"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": {
                                "properties": {
                                    "versions": {
                                        "title": "Versions",
                                        "type": "array",
                                        "default": [
                                            "http/1.1",
                                            "h2"
                                        ],
                                        "items": {
                                            "title": "Version",
                                            "anyOf": [
                                                {
                                                    "type": "string",
                                                    "enum": [
                                                        "http/1.1",
                                                        "h2"
                                                    ]
                                                },
                                                {
                                                    "$ref": "#/$defs/expression"
                                                }
                                            ]
                                        }
                                    },
                                    "access-control": {
                                        "title": "Access Control",
                                        "type": "object",
                                        "properties": {
                                            "policy": {
                                                "title": "Policy",
                                                "anyOf": [
                                                    {
                                                        "type": "string",
                                                        "enum": [
                                                            "same-origin",
                                                            "cross-origin"
                                                        ]
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ],
                                                "default": "same-origin"
                                            }
                                        },
                                        "oneOf": [
                                            {
                                                "properties": {
                                                    "policy": {
                                                        "const": "same-origin"
                                                    }
                                                }
                                            },
                                            {
                                                "properties": {
                                                    "policy": {
                                                        "const": "cross-origin"
                                                    },
                                                    "allow": {
                                                        "title": "Allow",
                                                        "type": "object",
                                                        "properties": {
                                                            "origins": {
                                                                "title": "Origins",
                                                                "type": "array",
                                                                "items": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "methods": {
                                                                "title": "Methods",
                                                                "type": "array",
                                                                "items": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "headers": {
                                                                "title": "Headers",
                                                                "type": "array",
                                                                "items": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "credentials": {
                                                                "title": "Credentials",
                                                                "anyOf": [
                                                                    {
                                                                        "type": "boolean"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "additionalProperties": false
                                                    },
                                                    "max-age": {
                                                        "title": "Max Age",
                                                        "anyOf": [
                                                            {
                                                                "type": "number"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "expose": {
                                                        "title": "Expose",
                                                        "type": "object",
                                                        "properties": {
                                                            "headers": {
                                                                "title": "Headers",
                                                                "type": "array",
                                                                "items": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        },
                                                        "additionalProperties": false
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        ]
                                    },
                                    "authorization": {
                                        "$ref": "#/$defs/options/binding/http/authorization"
                                    },
                                    "overrides": {
                                        "title": "Overrides",
                                        "type": "object",
                                        "additionalProperties": {
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "$ref": "#/$defs/expression"
                                                }
                                            ]
                                        }
                                    },
                                    "requests": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "path": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                },
                                                "method": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string",
                                                            "enum": [
                                                                "GET",
                                                                "PUT",
                                                                "POST",
                                                                "DELETE",
                                                                "OPTIONS",
                                                                "HEAD",
                                                                "PATCH",
                                                                "TRACE"
                                                            ]
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                },
                                                "content-type": {
                                                    "type": "array",
                                                    "items": {
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "headers": {
                                                    "type": "object",
                                                    "patternProperties": {
                                                        "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                            "$ref": "#/$defs/validator"
                                                        }
                                                    }
                                                },
                                                "params": {
                                                    "type": "object",
                                                    "properties": {
                                                        "path": {
                                                            "type": "object",
                                                            "patternProperties": {
                                                                "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                                    "$ref": "#/$defs/validator"
                                                                }
                                                            }
                                                        },
                                                        "query": {
                                                            "type": "object",
                                                            "patternProperties": {
                                                                "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                                    "$ref": "#/$defs/validator"
                                                                }
                                                            }
                                                        }
                                                    },
                                                    "additionalProperties": false
                                                },
                                                "content": {
                                                    "$ref": "#/$defs/validator"
                                                },
                                                "responses": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "status": {
                                                                "oneOf": [
                                                                    {
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "integer"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ]
                                                                    },
                                                                    {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "integer"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ]
                                                            },
                                                            "content-type": {
                                                                "type": "array",
                                                                "items": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "headers": {
                                                                "type": "object",
                                                                "patternProperties": {
                                                                    "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                                        "$ref": "#/$defs/validator"
                                                                    }
                                                                }
                                                            },
                                                            "content": {
                                                                "$ref": "#/$defs/validator"
                                                            }
                                                        },
                                                        "anyOf": [
                                                            {
                                                                "required": [
                                                                    "content"
                                                                ]
                                                            },
                                                            {
                                                                "required": [
                                                                    "headers"
                                                                ]
                                                            }
                                                        ],
                                                        "additionalProperties": false
                                                    }
                                                }
                                            },
                                            "anyOf": [
                                                {
                                                    "required": [
                                                        "path",
                                                        "headers"
                                                    ]
                                                },
                                                {
                                                    "required": [
                                                        "path",
                                                        "params"
                                                    ]
                                                },
                                                {
                                                    "required": [
                                                        "path",
                                                        "content"
                                                    ]
                                                },
                                                {
                                                    "required": [
                                                        "path",
                                                        "responses"
                                                    ]
                                                }
                                            ],
                                            "additionalProperties": false
                                        }
                                    }
                                },
                                "additionalProperties": false
                            },
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "headers": {
                                                        "title": "Headers",
                                                        "type": "object",
                                                        "additionalProperties": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        }
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": {
                                            "properties": {
                                                "headers": {
                                                    "title": "Headers",
                                                    "type": "object",
                                                    "properties": {
                                                        "overrides": {
                                                            "title": "Overrides",
                                                            "type": "object",
                                                            "additionalProperties": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    },
                                                    "additionalProperties": false
                                                }
                                            },
                                            "additionalProperties": false
                                        }
                                    }
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ],
                        "oneOf": [
                            {
                                "properties": {
                                    "kind": {
                                        "const": "server"
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "client"
                                    },
                                    "options": {
                                        "properties": {
                                            "access-control": false,
                                            "authorization": false
                                        }
                                    }
                                }
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "http-filesystem"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "http-filesystem"
                            },
                            "kind": {
                                "enum": [
                                    "proxy"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": false,
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "path": {
                                                        "title": "Path",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": {
                                            "properties": {
                                                "path": {
                                                    "title": "Topic",
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                                "path"
                                            ]
                                        }
                                    }
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "http-kafka"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "http-kafka"
                            },
                            "kind": {
                                "enum": [
                                    "proxy"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": {
                                "properties": {
                                    "idempotency": {
                                        "title": "Idempotency",
                                        "type": "object",
                                        "properties": {
                                            "header": {
                                                "title": "Idempotency Key HTTP Header",
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ],
                                                "default": "idempotency-key"
                                            }
                                        },
                                        "required": [
                                            "header"
                                        ],
                                        "additionalProperties": false
                                    },
                                    "correlation": {
                                        "title": "Correlation",
                                        "type": "object",
                                        "properties": {
                                            "headers": {
                                                "title": "Correlation Kafka Headers",
                                                "type": "object",
                                                "properties": {
                                                    "reply-to": {
                                                        "title": "Reply-To Kafka Header",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "zilla:reply-to"
                                                    },
                                                    "correlation-id": {
                                                        "title": "Correlation-Id Kafka Header",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "zilla:correlation-id"
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "required": [
                                            "headers"
                                        ],
                                        "additionalProperties": false
                                    }
                                },
                                "additionalProperties": false
                            },
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "method": {
                                                        "title": "Method",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "path": {
                                                        "title": "Path",
                                                        "anyOf": [
                                                            {
                                                                "type": "string",
                                                                "pattern": "^/"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": {
                                            "oneOf": [
                                                {
                                                    "properties": {
                                                        "capability": {
                                                            "title": "Capability",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string",
                                                                    "const": "fetch"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "topic": {
                                                            "title": "Topic",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "filters": {
                                                            "title": "Filters",
                                                            "type": "array",
                                                            "items": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "key": {
                                                                        "title": "Key",
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ]
                                                                    },
                                                                    "headers": {
                                                                        "title": "Headers",
                                                                        "type": "object",
                                                                        "additionalProperties": {
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                },
                                                                "additionalProperties": false
                                                            }
                                                        },
                                                        "merge": {
                                                            "title": "Merge",
                                                            "type": "object",
                                                            "properties": {
                                                                "content-type": {
                                                                    "title": "Content Type",
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string",
                                                                            "const": "application/json"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                },
                                                                "patch": {
                                                                    "title": "Patch",
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "initial": {
                                                                            "title": "Initial Value",
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "const": "[]"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        },
                                                                        "path": {
                                                                            "title": "Path",
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "const": "/-"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        }
                                                                    },
                                                                    "required": [
                                                                        "initial",
                                                                        "path"
                                                                    ],
                                                                    "additionalProperties": false
                                                                }
                                                            },
                                                            "required": [
                                                                "content-type"
                                                            ],
                                                            "additionalProperties": false
                                                        }
                                                    },
                                                    "additionalProperties": false
                                                },
                                                {
                                                    "properties": {
                                                        "capability": {
                                                            "title": "Capability",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string",
                                                                    "const": "produce"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "topic": {
                                                            "title": "Topic",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "acks": {
                                                            "title": "Acks",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string",
                                                                    "enum": [
                                                                        "none",
                                                                        "leader_only",
                                                                        "in_sync_replicas"
                                                                    ]
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ],
                                                            "default": "in_sync_replicas"
                                                        },
                                                        "key": {
                                                            "title": "Key",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "overrides": {
                                                            "title": "Headers",
                                                            "type": "object",
                                                            "additionalProperties": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "reply-to": {
                                                            "title": "Reply-To",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "async": {
                                                            "title": "Async",
                                                            "type": "object",
                                                            "additionalProperties": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    },
                                                    "additionalProperties": false,
                                                    "dependentRequired": {
                                                        "async": [
                                                            "reply-to"
                                                        ]
                                                    }
                                                }
                                            ],
                                            "required": [
                                                "capability",
                                                "topic"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "with"
                                    ]
                                }
                            },
                            "exit": false
                        },
                        "required": [
                            "routes"
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "kafka"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "kafka"
                            },
                            "kind": {
                                "enum": [
                                    "cache_client",
                                    "cache_server",
                                    "client"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "topic": {
                                                        "title": "Topic",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "groupId": {
                                                        "title": "groupId",
                                                        "anyOf": [
                                                            {
                                                                "type": "string",
                                                                "deprecated": true
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": false
                                    }
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ],
                        "oneOf": [
                            {
                                "properties": {
                                    "kind": {
                                        "const": "cache_client"
                                    },
                                    "options": {
                                        "properties": {
                                            "topics": {
                                                "title": "Topics",
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "additionalProperties": false,
                                                    "properties": {
                                                        "name": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "key": {
                                                            "$ref": "#/$defs/converter"
                                                        },
                                                        "value": {
                                                            "$ref": "#/$defs/converter"
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "cache_server"
                                    },
                                    "options": {
                                        "properties": {
                                            "bootstrap": {
                                                "title": "Bootstrap",
                                                "type": "array",
                                                "items": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            },
                                            "topics": {
                                                "$ref": "#/$defs/options/binding/kafka/cache_server_topics"
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "client"
                                    },
                                    "options": {
                                        "properties": {
                                            "servers": {
                                                "title": "Servers",
                                                "type": "array",
                                                "items": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string",
                                                            "pattern": "([^\\:]+):(\\d+)"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            },
                                            "sasl": {
                                                "$ref": "#/$defs/options/binding/kafka/sasl"
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                }
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "kafka-grpc"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "kafka-grpc"
                            },
                            "kind": {
                                "enum": [
                                    "remote_server"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": {
                                "properties": {
                                    "acks": {
                                        "title": "Acks",
                                        "anyOf": [
                                            {
                                                "type": "string",
                                                "enum": [
                                                    "none",
                                                    "leader_only",
                                                    "in_sync_replicas"
                                                ]
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ],
                                        "default": "in_sync_replicas"
                                    },
                                    "idempotency": {
                                        "title": "Idempotency",
                                        "type": "object",
                                        "properties": {
                                            "metadata": {
                                                "title": "Idempotency Metadata name",
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ],
                                                "default": "idempotency-key"
                                            }
                                        }
                                    },
                                    "correlation": {
                                        "title": "Correlation",
                                        "type": "object",
                                        "properties": {
                                            "headers": {
                                                "title": "Correlation Kafka Headers",
                                                "type": "object",
                                                "properties": {
                                                    "service": {
                                                        "title": "Grpc Service Kafka Header",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "zilla:service"
                                                    },
                                                    "method": {
                                                        "title": "Grpc Method Kafka Header",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "zilla:method"
                                                    },
                                                    "correlation-id": {
                                                        "title": "Correlation-Id Kafka Header",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "zilla:correlation-id"
                                                    },
                                                    "reply-to": {
                                                        "title": "Reply to Topic",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ],
                                                        "default": "zilla:reply-to"
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                }
                            },
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "topic": {
                                                        "title": "Topic",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "key": {
                                                        "title": "Key",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "headers": {
                                                        "title": "Headers",
                                                        "type": "object",
                                                        "additionalProperties": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "reply-to": {
                                                        "title": "ReplyTo",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "method": {
                                                        "title": "Method",
                                                        "anyOf": [
                                                            {
                                                                "type": "string",
                                                                "pattern": "^(?<Service>[^/]+)/(?<Method>[^/]+)"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "additionalProperties": false,
                                                "required": [
                                                    "topic",
                                                    "reply-to"
                                                ]
                                            }
                                        },
                                        "with": {
                                            "properties": {
                                                "scheme": {
                                                    "title": "Scheme",
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                },
                                                "authority": {
                                                    "title": "Authority",
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                                "scheme",
                                                "authority"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "with"
                                    ]
                                }
                            },
                            "exit": false,
                            "entry": {
                                "title": "Entry",
                                "anyOf": [
                                    {
                                        "type": "string",
                                        "pattern": "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$"
                                    },
                                    {
                                        "$ref": "#/$defs/expression"
                                    }
                                ]
                            }
                        },
                        "required": [
                            "entry",
                            "routes"
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "mqtt"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "mqtt"
                            },
                            "kind": {
                                "enum": [
                                    "server",
                                    "client"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "additionalProperties": false,
                                                "properties": {
                                                    "session": {
                                                        "title": "Session",
                                                        "type": "array",
                                                        "items": {
                                                            "type": "object",
                                                            "additionalProperties": false,
                                                            "properties": {
                                                                "client-id": {
                                                                    "title": "Client Id",
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        }
                                                    },
                                                    "subscribe": {
                                                        "title": "Subscribe",
                                                        "type": "array",
                                                        "items": {
                                                            "type": "object",
                                                            "additionalProperties": false,
                                                            "properties": {
                                                                "topic": {
                                                                    "title": "Topic",
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        }
                                                    },
                                                    "publish": {
                                                        "title": "Publish",
                                                        "type": "array",
                                                        "items": {
                                                            "type": "object",
                                                            "additionalProperties": false,
                                                            "properties": {
                                                                "topic": {
                                                                    "title": "Topic",
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "with": false
                                    }
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ],
                        "oneOf": [
                            {
                                "properties": {
                                    "kind": {
                                        "const": "server"
                                    },
                                    "options": {
                                        "properties": {
                                            "versions": {
                                                "title": "Versions",
                                                "type": "array",
                                                "items": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string",
                                                            "enum": [
                                                                "v3.1.1",
                                                                "v5"
                                                            ]
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            },
                                            "authorization": {
                                                "$ref": "#/$defs/options/binding/mqtt/authorization"
                                            },
                                            "topics": {
                                                "title": "Topics",
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "additionalProperties": false,
                                                    "properties": {
                                                        "name": {
                                                            "anyOf": [
                                                                {
                                                                    "type": "string"
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ]
                                                        },
                                                        "content": {
                                                            "$ref": "#/$defs/validator"
                                                        },
                                                        "user-properties": {
                                                            "type": "object",
                                                            "patternProperties": {
                                                                "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                                    "$ref": "#/$defs/validator"
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "client"
                                    },
                                    "options": {
                                        "properties": {
                                            "authorization": {
                                                "$ref": "#/$defs/options/binding/mqtt/authorization"
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                }
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "mqtt-kafka"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "mqtt-kafka"
                            },
                            "kind": {
                                "enum": [
                                    "proxy"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": {
                                "properties": {
                                    "server": {
                                        "title": "Server Reference",
                                        "anyOf": [
                                            {
                                                "type": "string"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ]
                                    },
                                    "topics": {
                                        "title": "Topics",
                                        "type": "object",
                                        "properties": {
                                            "sessions": {
                                                "title": "Kafka Sessions Topic",
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            },
                                            "messages": {
                                                "title": "Kafka Messages Topic",
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            },
                                            "retained": {
                                                "title": "Kafka Retained Topic",
                                                "anyOf": [
                                                    {
                                                        "type": "string"
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ]
                                            },
                                            "additionalProperties": false
                                        },
                                        "required": [
                                            "sessions",
                                            "retained",
                                            "messages"
                                        ],
                                        "additionalProperties": false
                                    },
                                    "clients": {
                                        "title": "Clients",
                                        "type": "array",
                                        "items": {
                                            "anyOf": [
                                                {
                                                    "type": "string"
                                                },
                                                {
                                                    "$ref": "#/$defs/expression"
                                                }
                                            ]
                                        }
                                    },
                                    "publish": {
                                        "title": "Publish",
                                        "type": "object",
                                        "properties": {
                                            "qosMax": {
                                                "title": "Maximum QoS",
                                                "anyOf": [
                                                    {
                                                        "type": "string",
                                                        "enum": [
                                                            "at_most_once",
                                                            "at_least_once",
                                                            "exactly_once"
                                                        ]
                                                    },
                                                    {
                                                        "$ref": "#/$defs/expression"
                                                    }
                                                ],
                                                "default": "exactly_once"
                                            },
                                            "additionalProperties": false
                                        },
                                        "required": [
                                            "qosMax"
                                        ],
                                        "additionalProperties": false
                                    }
                                },
                                "required": [
                                    "topics"
                                ],
                                "additionalProperties": false
                            },
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "anyOf": [
                                                    {
                                                        "properties": {
                                                            "subscribe": {
                                                                "title": "Subscribe",
                                                                "type": "array",
                                                                "items": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "topic": {
                                                                            "title": "Topic",
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        }
                                                                    },
                                                                    "additionalProperties": false
                                                                }
                                                            }
                                                        }
                                                    },
                                                    {
                                                        "properties": {
                                                            "publish": {
                                                                "title": "Publish",
                                                                "type": "array",
                                                                "items": {
                                                                    "type": "object",
                                                                    "properties": {
                                                                        "topic": {
                                                                            "title": "Topic",
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        }
                                                                    },
                                                                    "additionalProperties": false
                                                                }
                                                            }
                                                        }
                                                    }
                                                ]
                                            }
                                        },
                                        "with": {
                                            "properties": {
                                                "messages": {
                                                    "title": "Messages Topic",
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            },
                                            "additionalProperties": false
                                        }
                                    },
                                    "required": [
                                        "with"
                                    ]
                                }
                            }
                        },
                        "required": [
                            "options"
                        ],
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "openapi"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "openapi"
                            },
                            "kind": {
                                "enum": [
                                    "client",
                                    "server"
                                ]
                            },
                            "catalog": false,
                            "options": {
                                "properties": {
                                    "tcp": {
                                        "$ref": "#/$defs/options/binding/tcp"
                                    },
                                    "tls": {
                                        "$ref": "#/$defs/options/binding/tls"
                                    },
                                    "http": {
                                        "title": "Http",
                                        "type": "object",
                                        "properties": {
                                            "authorization": {
                                                "$ref": "#/$defs/options/binding/http/authorization"
                                            }
                                        },
                                        "additionalProperties": false
                                    },
                                    "specs": {
                                        "title": "Specs",
                                        "type": "object",
                                        "patternProperties": {
                                            "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                "type": "object",
                                                "properties": {
                                                    "servers": {
                                                        "title": "Servers",
                                                        "type": "array",
                                                        "items": {
                                                            "type": "object",
                                                            "properties": {
                                                                "url": {
                                                                    "title": "URL",
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string",
                                                                            "pattern": "^([a-zA-Z0-9\\\\.-]+)(:(\\\\{[a-zA-Z_]+\\\\}|[0-9]+))?$"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            },
                                                            "additionalProperties": false
                                                        }
                                                    },
                                                    "catalog": {
                                                        "title": "Catalog",
                                                        "type": "object",
                                                        "patternProperties": {
                                                            "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                                "type": "object",
                                                                "properties": {
                                                                    "subject": {
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ]
                                                                    },
                                                                    "version": {
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ],
                                                                        "default": "latest"
                                                                    }
                                                                },
                                                                "required": [
                                                                    "subject"
                                                                ],
                                                                "additionalProperties": false
                                                            },
                                                            "additionalProperties": false
                                                        }
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        }
                                    }
                                },
                                "additionalProperties": false
                            },
                            "routes": false
                        },
                        "oneOf": [
                            {
                                "properties": {
                                    "kind": {
                                        "const": "server"
                                    }
                                },
                                "anyOf": [
                                    {
                                        "required": [
                                            "exit"
                                        ]
                                    }
                                ]
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "client"
                                    },
                                    "exit": false
                                }
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "openapi-asyncapi"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "openapi-asyncapi"
                            },
                            "kind": {
                                "enum": [
                                    "proxy"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": {
                                "properties": {
                                    "specs": {
                                        "title": "Specs",
                                        "type": "object",
                                        "properties": {
                                            "openapi": {
                                                "title": "Openapi",
                                                "type": "object",
                                                "patternProperties": {
                                                    "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                        "type": "object",
                                                        "properties": {
                                                            "catalog": {
                                                                "title": "Catalog",
                                                                "type": "object",
                                                                "patternProperties": {
                                                                    "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "subject": {
                                                                                "anyOf": [
                                                                                    {
                                                                                        "type": "string"
                                                                                    },
                                                                                    {
                                                                                        "$ref": "#/$defs/expression"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            "version": {
                                                                                "anyOf": [
                                                                                    {
                                                                                        "type": "string"
                                                                                    },
                                                                                    {
                                                                                        "$ref": "#/$defs/expression"
                                                                                    }
                                                                                ],
                                                                                "default": "latest"
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "subject"
                                                                        ],
                                                                        "additionalProperties": false
                                                                    },
                                                                    "additionalProperties": false
                                                                }
                                                            }
                                                        },
                                                        "additionalProperties": false
                                                    }
                                                }
                                            },
                                            "asyncapi": {
                                                "title": "Asyncapi",
                                                "type": "object",
                                                "patternProperties": {
                                                    "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                        "type": "object",
                                                        "properties": {
                                                            "catalog": {
                                                                "title": "Catalog",
                                                                "type": "object",
                                                                "patternProperties": {
                                                                    "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                                                        "type": "object",
                                                                        "properties": {
                                                                            "subject": {
                                                                                "anyOf": [
                                                                                    {
                                                                                        "type": "string"
                                                                                    },
                                                                                    {
                                                                                        "$ref": "#/$defs/expression"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            "version": {
                                                                                "anyOf": [
                                                                                    {
                                                                                        "type": "string"
                                                                                    },
                                                                                    {
                                                                                        "$ref": "#/$defs/expression"
                                                                                    }
                                                                                ],
                                                                                "default": "latest"
                                                                            }
                                                                        },
                                                                        "required": [
                                                                            "subject"
                                                                        ],
                                                                        "additionalProperties": false
                                                                    },
                                                                    "additionalProperties": false
                                                                }
                                                            }
                                                        },
                                                        "additionalProperties": false
                                                    }
                                                }
                                            }
                                        },
                                        "required": [
                                            "openapi",
                                            "asyncapi"
                                        ]
                                    }
                                },
                                "additionalProperties": false
                            },
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "api-id": {
                                                        "title": "ApiId",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "operation-id": {
                                                        "title": "OperationId",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": {
                                            "properties": {
                                                "api-id": {
                                                    "title": "ApiId",
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                },
                                                "operation-id": {
                                                    "title": "OperationId",
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                }
                                            }
                                        }
                                    },
                                    "required": [
                                        "with"
                                    ]
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "pgsql"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "pgsql"
                            },
                            "kind": {
                                "enum": [
                                    "client",
                                    "server"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": false,
                            "routes": false
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "proxy"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "proxy"
                            },
                            "kind": {
                                "enum": [
                                    "client",
                                    "server"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": false,
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "additionalProperties": false,
                                                "properties": {
                                                    "transport": {
                                                        "title": "Transport",
                                                        "anyOf": [
                                                            {
                                                                "type": "string",
                                                                "enum": [
                                                                    "stream",
                                                                    "datagram"
                                                                ]
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "family": {
                                                        "title": "Family",
                                                        "anyOf": [
                                                            {
                                                                "type": "string",
                                                                "enum": [
                                                                    "inet",
                                                                    "inet4",
                                                                    "inet6",
                                                                    "unix"
                                                                ]
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "source": {
                                                        "title": "Source",
                                                        "type": "object",
                                                        "additionalProperties": false,
                                                        "properties": {
                                                            "host": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "port": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "integer"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    },
                                                    "destination": {
                                                        "title": "Source",
                                                        "type": "object",
                                                        "additionalProperties": false,
                                                        "properties": {
                                                            "host": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "port": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "integer"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        }
                                                    },
                                                    "info": {
                                                        "title": "Info",
                                                        "type": "object",
                                                        "additionalProperties": false,
                                                        "properties": {
                                                            "alpn": {
                                                                "title": "Application Protocol",
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "authority": {
                                                                "title": "Authority",
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "identity": {
                                                                "title": "Identity",
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "namespace": {
                                                                "title": "Namespace",
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "secure": {
                                                                "title": "Secure",
                                                                "type": "object",
                                                                "additionalProperties": false,
                                                                "properties": {
                                                                    "version": {
                                                                        "title": "Protocol Version",
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ]
                                                                    },
                                                                    "cipher": {
                                                                        "title": "Cipher Name",
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ]
                                                                    },
                                                                    "key": {
                                                                        "title": "Key Algorithm",
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ]
                                                                    },
                                                                    "name": {
                                                                        "title": "Common Name",
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ]
                                                                    },
                                                                    "signature": {
                                                                        "title": "Signature Algorithm",
                                                                        "anyOf": [
                                                                            {
                                                                                "type": "string"
                                                                            },
                                                                            {
                                                                                "$ref": "#/$defs/expression"
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        },
                                        "with": false
                                    }
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "sse"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "sse"
                            },
                            "kind": {
                                "enum": [
                                    "client",
                                    "server"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": {
                                "properties": {
                                    "retry": {
                                        "anyOf": [
                                            {
                                                "type": "integer"
                                            },
                                            {
                                                "$ref": "#/$defs/expression"
                                            }
                                        ],
                                        "default": 2000
                                    },
                                    "requests": {
                                        "type": "array",
                                        "items": {
                                            "type": "object",
                                            "properties": {
                                                "path": {
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                },
                                                "content": {
                                                    "$ref": "#/$defs/validator"
                                                }
                                            },
                                            "anyOf": [
                                                {
                                                    "required": [
                                                        "path",
                                                        "content"
                                                    ]
                                                }
                                            ],
                                            "additionalProperties": false
                                        }
                                    }
                                },
                                "additionalProperties": false
                            },
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "path": {
                                                        "title": "Path",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": false
                                    }
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "sse-kafka"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "sse-kafka"
                            },
                            "kind": {
                                "enum": [
                                    "proxy"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": false,
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "path": {
                                                        "title": "Path",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": {
                                            "properties": {
                                                "topic": {
                                                    "title": "Topic",
                                                    "anyOf": [
                                                        {
                                                            "type": "string"
                                                        },
                                                        {
                                                            "$ref": "#/$defs/expression"
                                                        }
                                                    ]
                                                },
                                                "filters": {
                                                    "title": "Filters",
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "properties": {
                                                            "key": {
                                                                "title": "Key",
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "headers": {
                                                                "title": "Headers",
                                                                "type": "object",
                                                                "additionalProperties": {
                                                                    "anyOf": [
                                                                        {
                                                                            "type": "string"
                                                                        },
                                                                        {
                                                                            "$ref": "#/$defs/expression"
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        },
                                                        "additionalProperties": false
                                                    }
                                                },
                                                "event": {
                                                    "properties": {
                                                        "id": {
                                                            "title": "Id",
                                                            "anyOf": [
                                                                {
                                                                    "type": "string",
                                                                    "enum": [
                                                                        "${etag}",
                                                                        "[\"${base64(key)}\",\"${etag}\"]"
                                                                    ]
                                                                },
                                                                {
                                                                    "$ref": "#/$defs/expression"
                                                                }
                                                            ],
                                                            "default": "${etag}"
                                                        }
                                                    }
                                                }
                                            },
                                            "additionalProperties": false,
                                            "required": [
                                                "topic"
                                            ]
                                        }
                                    }
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "tcp"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "tcp"
                            },
                            "kind": {
                                "enum": [
                                    "server",
                                    "client"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "options": {
                                "$ref": "#/$defs/options/binding/tcp"
                            },
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "authority": {
                                                        "title": "Authority",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "cidr": {
                                                        "title": "CIDR Mask",
                                                        "anyOf": [
                                                            {
                                                                "type": "string",
                                                                "pattern": "^[0-9a-fA-F:.]+/(\\d{1,3})$"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "port": {
                                                        "title": "Port",
                                                        "oneOf": [
                                                            {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "integer"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string",
                                                                        "pattern": "^\\d+(-\\d+)?$"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "array",
                                                                "items": {
                                                                    "oneOf": [
                                                                        {
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "integer"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "pattern": "^\\d+(-\\d+)?$"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        ]
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": false
                                    }
                                }
                            }
                        },
                        "oneOf": [
                            {
                                "properties": {
                                    "kind": {
                                        "const": "server"
                                    }
                                },
                                "anyOf": [
                                    {
                                        "required": [
                                            "exit"
                                        ]
                                    },
                                    {
                                        "properties": {
                                            "routes": {
                                                "required": [
                                                    "exit"
                                                ]
                                            }
                                        },
                                        "required": [
                                            "routes"
                                        ]
                                    }
                                ]
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "client"
                                    },
                                    "routes": {
                                        "items": {
                                            "properties": {
                                                "exit": false
                                            }
                                        }
                                    },
                                    "exit": false
                                }
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "tls"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "tls"
                            },
                            "kind": {
                                "enum": [
                                    "client",
                                    "server",
                                    "proxy"
                                ]
                            },
                            "catalog": false,
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "authority": {
                                                        "title": "Authority",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "alpn": {
                                                        "title": "Application Protocol",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "port": {
                                                        "title": "Port",
                                                        "oneOf": [
                                                            {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "integer"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string",
                                                                        "pattern": "^\\d+(-\\d+)?$"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "type": "array",
                                                                "items": {
                                                                    "oneOf": [
                                                                        {
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "integer"
                                                                                },
                                                                                {
                                                                                    "$ref": "#/$defs/expression"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "anyOf": [
                                                                                {
                                                                                    "type": "string",
                                                                                    "pattern": "^\\d+(-\\d+)?$"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            }
                                                        ]
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": false
                                    }
                                }
                            }
                        },
                        "if": {
                            "properties": {
                                "kind": {
                                    "const": "server"
                                }
                            }
                        },
                        "then": {
                            "required": [
                                "vault"
                            ]
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ],
                        "oneOf": [
                            {
                                "properties": {
                                    "kind": {
                                        "const": "client"
                                    },
                                    "options": {
                                        "$ref": "#/$defs/options/binding/tls"
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "server"
                                    },
                                    "options": {
                                        "allOf": [
                                            {
                                                "$ref": "#/$defs/options/binding/tls"
                                            },
                                            {
                                                "oneOf": [
                                                    {
                                                        "required": [
                                                            "keys"
                                                        ]
                                                    },
                                                    {
                                                        "required": [
                                                            "signers"
                                                        ]
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "proxy"
                                    },
                                    "options": false
                                }
                            }
                        ]
                    }
                },
                {
                    "if": {
                        "properties": {
                            "type": {
                                "const": "ws"
                            }
                        }
                    },
                    "then": {
                        "properties": {
                            "type": {
                                "const": "ws"
                            },
                            "kind": {
                                "enum": [
                                    "client",
                                    "server"
                                ]
                            },
                            "catalog": false,
                            "vault": false,
                            "routes": {
                                "title": "Routes",
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "when": {
                                            "title": "When",
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "protocol": {
                                                        "title": "Subprotocol",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "scheme": {
                                                        "title": "Scheme",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "authority": {
                                                        "title": "Authority",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "path": {
                                                        "title": "Path",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                },
                                                "additionalProperties": false
                                            }
                                        },
                                        "with": false
                                    }
                                }
                            }
                        },
                        "anyOf": [
                            {
                                "required": [
                                    "exit"
                                ]
                            },
                            {
                                "required": [
                                    "routes"
                                ]
                            }
                        ],
                        "oneOf": [
                            {
                                "properties": {
                                    "kind": {
                                        "const": "client"
                                    },
                                    "options": {
                                        "properties": {
                                            "defaults": {
                                                "title": "Defaults",
                                                "type": "object",
                                                "additionalProperties": false,
                                                "properties": {
                                                    "protocol": {
                                                        "title": "Subprotocol",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "scheme": {
                                                        "title": "Scheme",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "authority": {
                                                        "title": "Authority",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    },
                                                    "path": {
                                                        "title": "Path",
                                                        "anyOf": [
                                                            {
                                                                "type": "string"
                                                            },
                                                            {
                                                                "$ref": "#/$defs/expression"
                                                            }
                                                        ]
                                                    }
                                                }
                                            }
                                        },
                                        "additionalProperties": false
                                    }
                                }
                            },
                            {
                                "properties": {
                                    "kind": {
                                        "const": "server"
                                    },
                                    "options": false
                                }
                            }
                        ]
                    }
                }
            ]
        },
        "converter": {
            "oneOf": [
                {
                    "$ref": "#/$defs/converter/types"
                },
                {
                    "$ref": "#/$defs/converter/model"
                }
            ],
            "types": {
                "anyOf": [
                    {
                        "type": "string",
                        "enum": [
                            "avro",
                            "double",
                            "float",
                            "int32",
                            "int64",
                            "json",
                            "protobuf",
                            "string"
                        ]
                    },
                    {
                        "$ref": "#/$defs/expression"
                    }
                ]
            },
            "model": {
                "type": "object",
                "properties": {
                    "model": {
                        "$ref": "#/$defs/converter/types"
                    }
                },
                "required": [
                    "model"
                ],
                "allOf": [
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "avro"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "avro"
                                },
                                "view": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "json"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "catalog": {
                                    "title": "Catalog",
                                    "type": "object",
                                    "patternProperties": {
                                        "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                            "type": "array",
                                            "items": {
                                                "oneOf": [
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "integer"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "required": [
                                                            "id"
                                                        ],
                                                        "additionalProperties": false
                                                    },
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "strategy": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string",
                                                                        "enum": [
                                                                            "topic"
                                                                        ]
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "version": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ],
                                                                "default": "latest"
                                                            }
                                                        },
                                                        "required": [
                                                            "strategy"
                                                        ],
                                                        "additionalProperties": false
                                                    },
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "subject": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "version": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ],
                                                                "default": "latest"
                                                            }
                                                        },
                                                        "required": [
                                                            "subject"
                                                        ],
                                                        "additionalProperties": false
                                                    }
                                                ]
                                            }
                                        }
                                    },
                                    "maxProperties": 1
                                }
                            },
                            "required": [
                                "catalog"
                            ],
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "double"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "double"
                                },
                                "format": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "binary",
                                                "text"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ],
                                    "default": "text"
                                },
                                "range": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "pattern": "((?:\\(|\\[))(-?\\d+(?:\\.\\d+)?)?,(-?\\d+(?:\\.\\d+)?)?((?:\\)|\\]))"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "multiple": {
                                    "anyOf": [
                                        {
                                            "type": "number"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "float"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "float"
                                },
                                "format": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "binary",
                                                "text"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ],
                                    "default": "text"
                                },
                                "range": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "pattern": "((?:\\(|\\[))(-?\\d+(?:\\.\\d+)?)?,(-?\\d+(?:\\.\\d+)?)?((?:\\)|\\]))"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "multiple": {
                                    "anyOf": [
                                        {
                                            "type": "number"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "int32"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "int32"
                                },
                                "format": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "binary",
                                                "text"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ],
                                    "default": "text"
                                },
                                "range": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "pattern": "((?:\\(|\\[))(-?\\d+)?,(-?\\d+)?((?:\\)|\\]))"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "multiple": {
                                    "anyOf": [
                                        {
                                            "type": "integer"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "int64"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "int64"
                                },
                                "format": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "binary",
                                                "text"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ],
                                    "default": "text"
                                },
                                "range": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "pattern": "((?:\\(|\\[))(-?\\d+)?,(-?\\d+)?((?:\\)|\\]))"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "multiple": {
                                    "anyOf": [
                                        {
                                            "type": "integer"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "json"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "json"
                                },
                                "catalog": {
                                    "title": "Catalog",
                                    "type": "object",
                                    "patternProperties": {
                                        "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                            "type": "array",
                                            "items": {
                                                "oneOf": [
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "integer"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "required": [
                                                            "id"
                                                        ],
                                                        "additionalProperties": false
                                                    },
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "strategy": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string",
                                                                        "enum": [
                                                                            "topic"
                                                                        ]
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "version": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ],
                                                                "default": "latest"
                                                            }
                                                        },
                                                        "required": [
                                                            "strategy"
                                                        ],
                                                        "additionalProperties": false
                                                    },
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "subject": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "version": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ],
                                                                "default": "latest"
                                                            }
                                                        },
                                                        "required": [
                                                            "subject"
                                                        ],
                                                        "additionalProperties": false
                                                    }
                                                ]
                                            }
                                        }
                                    },
                                    "maxProperties": 1
                                }
                            },
                            "required": [
                                "catalog"
                            ],
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "protobuf"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "protobuf"
                                },
                                "view": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "json"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "catalog": {
                                    "title": "Catalog",
                                    "type": "object",
                                    "patternProperties": {
                                        "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                            "type": "array",
                                            "items": {
                                                "oneOf": [
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "integer"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "record": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "required": [
                                                            "id",
                                                            "record"
                                                        ],
                                                        "additionalProperties": false
                                                    },
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "strategy": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string",
                                                                        "enum": [
                                                                            "topic"
                                                                        ]
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "version": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ],
                                                                "default": "latest"
                                                            },
                                                            "record": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "required": [
                                                            "strategy",
                                                            "record"
                                                        ],
                                                        "additionalProperties": false
                                                    },
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "subject": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "version": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ],
                                                                "default": "latest"
                                                            },
                                                            "record": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "required": [
                                                            "subject",
                                                            "record"
                                                        ],
                                                        "additionalProperties": false
                                                    }
                                                ]
                                            }
                                        }
                                    },
                                    "maxProperties": 1
                                }
                            },
                            "required": [
                                "catalog"
                            ],
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "string"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "string"
                                },
                                "encoding": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "utf_8",
                                                "utf_16"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "minLength": {
                                    "anyOf": [
                                        {
                                            "type": "integer",
                                            "minimum": 1
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "maxLength": {
                                    "anyOf": [
                                        {
                                            "type": "integer",
                                            "minimum": 1
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "pattern": {
                                    "anyOf": [
                                        {
                                            "type": "string"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    }
                ]
            }
        },
        "validator": {
            "oneOf": [
                {
                    "$ref": "#/$defs/validator/types"
                },
                {
                    "$ref": "#/$defs/validator/model"
                }
            ],
            "types": {
                "anyOf": [
                    {
                        "type": "string",
                        "enum": [
                            "double",
                            "float",
                            "int32",
                            "int64",
                            "json",
                            "string"
                        ]
                    },
                    {
                        "$ref": "#/$defs/expression"
                    }
                ]
            },
            "model": {
                "type": "object",
                "properties": {
                    "model": {
                        "$ref": "#/$defs/validator/types"
                    }
                },
                "required": [
                    "model"
                ],
                "allOf": [
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "double"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "double"
                                },
                                "format": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "binary",
                                                "text"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ],
                                    "default": "text"
                                },
                                "range": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "pattern": "((?:\\(|\\[))(-?\\d+(?:\\.\\d+)?)?,(-?\\d+(?:\\.\\d+)?)?((?:\\)|\\]))"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "multiple": {
                                    "anyOf": [
                                        {
                                            "type": "number"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "float"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "float"
                                },
                                "format": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "binary",
                                                "text"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ],
                                    "default": "text"
                                },
                                "range": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "pattern": "((?:\\(|\\[))(-?\\d+(?:\\.\\d+)?)?,(-?\\d+(?:\\.\\d+)?)?((?:\\)|\\]))"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "multiple": {
                                    "anyOf": [
                                        {
                                            "type": "number"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "int32"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "int32"
                                },
                                "format": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "binary",
                                                "text"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ],
                                    "default": "text"
                                },
                                "range": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "pattern": "((?:\\(|\\[))(-?\\d+)?,(-?\\d+)?((?:\\)|\\]))"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "multiple": {
                                    "anyOf": [
                                        {
                                            "type": "integer"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "int64"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "int64"
                                },
                                "format": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "binary",
                                                "text"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ],
                                    "default": "text"
                                },
                                "range": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "pattern": "((?:\\(|\\[))(-?\\d+)?,(-?\\d+)?((?:\\)|\\]))"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "multiple": {
                                    "anyOf": [
                                        {
                                            "type": "number"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "json"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "json"
                                },
                                "catalog": {
                                    "title": "Catalog",
                                    "type": "object",
                                    "patternProperties": {
                                        "^[a-zA-Z]+[a-zA-Z0-9\\._\\-]*$": {
                                            "type": "array",
                                            "items": {
                                                "oneOf": [
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "integer"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "required": [
                                                            "id"
                                                        ],
                                                        "additionalProperties": false
                                                    },
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "strategy": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string",
                                                                        "enum": [
                                                                            "topic"
                                                                        ]
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "version": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ],
                                                                "default": "latest"
                                                            }
                                                        },
                                                        "required": [
                                                            "strategy"
                                                        ],
                                                        "additionalProperties": false
                                                    },
                                                    {
                                                        "type": "object",
                                                        "properties": {
                                                            "subject": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ]
                                                            },
                                                            "version": {
                                                                "anyOf": [
                                                                    {
                                                                        "type": "string"
                                                                    },
                                                                    {
                                                                        "$ref": "#/$defs/expression"
                                                                    }
                                                                ],
                                                                "default": "latest"
                                                            }
                                                        },
                                                        "required": [
                                                            "subject"
                                                        ],
                                                        "additionalProperties": false
                                                    }
                                                ]
                                            }
                                        }
                                    },
                                    "maxProperties": 1
                                }
                            },
                            "required": [
                                "catalog"
                            ],
                            "additionalProperties": false
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "model": {
                                    "const": "string"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "model": {
                                    "const": "string"
                                },
                                "encoding": {
                                    "anyOf": [
                                        {
                                            "type": "string",
                                            "enum": [
                                                "utf_8"
                                            ]
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "minLength": {
                                    "anyOf": [
                                        {
                                            "type": "integer",
                                            "minimum": 1
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "maxLength": {
                                    "anyOf": [
                                        {
                                            "type": "integer",
                                            "minimum": 1
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                },
                                "pattern": {
                                    "anyOf": [
                                        {
                                            "type": "string"
                                        },
                                        {
                                            "$ref": "#/$defs/expression"
                                        }
                                    ]
                                }
                            },
                            "additionalProperties": false
                        }
                    }
                ]
            }
        }
    }
}
